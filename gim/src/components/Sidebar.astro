<aside
  class="fixed top-[64px] left-0 h-[calc(100dvh-64px)] w-16 md:w-20 bg-[#002633] flex flex-col items-center py-6 z-20"
>
  <nav id="sidebar-nav" class="flex flex-col gap-7 mt-8 w-full items-center">
    <a href="/" class="sidebar-btn group" data-index="0" aria-label="Home">
      <span class="sidebar-border"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7 sidebar-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l-2 0l9 -9l9 9l-2 0"></path><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path></svg>
    </a>
    <a href="/location" class="sidebar-btn group" data-index="1" aria-label="Location">
      <span class="sidebar-border"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7 sidebar-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z"></path></svg>
    </a>
    <button class="sidebar-btn group" data-index="2" aria-label="Docs">
      <span class="sidebar-border"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7 sidebar-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18"></path><path d="M13 8l2 0"></path><path d="M13 12l2 0"></path></svg>
    </button>
    <button class="sidebar-btn group" data-index="3" aria-label="Chat">
      <span class="sidebar-border"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7 sidebar-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 9h8"></path><path d="M8 13h6"></path><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"></path></svg>
    </button>
    <button class="sidebar-btn group" data-index="4" aria-label="Monitor">
      <span class="sidebar-border"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7 sidebar-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 4a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v12a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-12z"></path><path d="M3 13h18"></path><path d="M8 21h8"></path><path d="M10 17l-.5 4"></path><path d="M14 17l.5 4"></path></svg>
    </button>
    <button class="sidebar-btn group" data-index="5" aria-label="Piggy">
      <span class="sidebar-border"></span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7 sidebar-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 11v.01"></path><path d="M16 3l0 3.803a6.019 6.019 0 0 1 2.658 3.197h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-1.342a6.008 6.008 0 0 1 -1.658 2.473v2.027a1.5 1.5 0 0 1 -3 0v-.583a6.04 6.04 0 0 1 -1 .083h-4a6.04 6.04 0 0 1 -1 -.083v.583a1.5 1.5 0 0 1 -3 0v-2l0 -.027a6 6 0 0 1 4 -10.473h2.5l4.5 -3z"></path></svg>
    </button>
  </nav>
  <div class="mt-auto w-full flex flex-col items-center">
    <button
      class="w-10 h-10 rounded-lg flex items-center justify-center hover:bg-[#28CA9E]/10 transition-colors"
      aria-label="Logout"
    >
      <svg viewBox="0 0 24 24" class="w-7 h-7 rotate-180" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g stroke-width="0"></g>
        <g stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="SVGRepo_iconCarrier">
          <path d="M15 4H18C19.1046 4 20 4.89543 20 6L20 18C20 19.1046 19.1046 20 18 20H15M11 16L15 12M15 12L11 8M15 12H3" stroke="#28CA9E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </g>
      </svg>
    </button>
  </div>
  <script>
  function updateSidebarActive() {
    const sidebarBtns = document.querySelectorAll('.sidebar-btn');
    const currentPath = window.location.pathname;
    sidebarBtns.forEach(btn => {
      const href = btn.getAttribute('href');
      if (href && (href === currentPath || (href !== '/' && currentPath.startsWith(href)))) {
        btn.classList.add('active');
        const icon = btn.querySelector('.sidebar-icon');
        const border = btn.querySelector('.sidebar-border');
        if (icon) icon.setAttribute('stroke', '#28CA9E');
        if (border && border instanceof HTMLElement) border.style.opacity = '1';
      } else {
        btn.classList.remove('active');
        const icon = btn.querySelector('.sidebar-icon');
        const border = btn.querySelector('.sidebar-border');
        if (icon) icon.setAttribute('stroke', '#fff');
        if (border && border instanceof HTMLElement) border.style.opacity = '0';
      }
    });
  }
  updateSidebarActive();
  window.addEventListener('astro:after-swap', updateSidebarActive);
</script>
<style>
  .sidebar-btn.active .sidebar-icon { stroke: #28CA9E !important; }
  .sidebar-btn.active .sidebar-border { opacity: 1 !important; }
</style>
  <style>
    .sidebar-btn { position: relative; background: none; border: none; outline: none; cursor: pointer; }
    .sidebar-border {
      position: absolute;
      right: -26px;
      top: 50%;
      transform: translateY(-50%);
      width: 2px;
      height: 34px;
      border-radius: 2px;
      background: #28CA9E;
      opacity: 0;
      transition: opacity 0.2s;
    }
  </style>
</aside>
